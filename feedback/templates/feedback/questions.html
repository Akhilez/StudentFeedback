{% extends 'feedback/base.html' %}

{% block head %}
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'stars.css' %}">
{% endblock %}

{% block maincontent %}
    <h2 align="center" ><strong>RATE YOUR FACULTY</strong></h2>

    <h3 align="center">{{ class_obj.year }} {{ class_obj.branch }} {{ class_obj.section }}</h3>
    <div>
        <div style="float:left">
            {% if category == 'facility' %}
                <h2>Facility feedback</h2>
            {% elif category == 'faculty' %}
                <h2>{{ subject }} - {{ faculty }}</h2><br/>
            {% endif %}
        </div>

        <div style="float:right">
            <ul class="pagination" style="float:right">
                {% for i in subjects %}
                    <li {% ifequal forloop.counter pager.number %}class="active" {% else %}class="disabled"{% endifequal %}><a>{{ forloop.counter }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>


    {% if error %}
        <div class="alert alert-danger">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            <strong>Error!</strong> {{ error }}
        </div>
    {% endif %}

    <form method="post" action="" id="questionForm">
        {% csrf_token %}
        <table class="table" >
            <thead>
              <tr>
                <th>Questions</th>
                <th>Rating</th>
              </tr>
            </thead>
            <tbody>
                {% for question in questions %}
                    {% if forloop.counter in subcategory %}
                        <tr><td colspan="3"><b>{{ question.subcategory }}</b></td></tr>
                    {% endif %}
                  <tr>
                    <td>{{ question.question }}</td>
                      <td>
                        <fieldset class="rating" name="review">
                            <input type="radio" id="star5-{{ forloop.counter }}" name="star{{ forloop.counter }}" value="5" required /><label class = "full" for="star5-{{ forloop.counter }}" title="Excellent"></label>
                            <input type="radio" id="star4-{{ forloop.counter }}" name="star{{ forloop.counter }}" value="4" /><label class = "full" for="star4-{{ forloop.counter }}" title="Good"></label>
                            <input type="radio" id="star3-{{ forloop.counter }}" name="star{{ forloop.counter }}" value="3" /><label class = "full" for="star3-{{ forloop.counter }}" title="Average"></label>
                            <input type="radio" id="star2-{{ forloop.counter }}" name="star{{ forloop.counter }}" value="2" /><label class = "full" for="star2-{{ forloop.counter }}" title="Poor"></label>
                            <input type="radio" id="star1-{{ forloop.counter }}" name="star{{ forloop.counter }}" value="1" /><label class = "full" for="star1-{{ forloop.counter }}" title="Very poor"></label>
                        </fieldset>
                    </td>

                  </tr>
                {% endfor %}
            </tbody>
        </table>

        <div id="fillall" align="center" style="color:orangered"></div>

        <div align="center">
            <ul class="pager">
                {% if pager.has_next %}
                    <input id="next_button" class="btn btn-primary" type="submit" value="Rate next Faculty" name="next">
                {% else %}
                    <textarea class="form-control" id="remarks" placeholder="Remarks" name="remarks" ></textarea><br/>
                    <p align="center">By Clicking Finish, You'll be redirected to LOA Page.</p>
                    <input id="confirm_finish" type="submit" value="Finish" name="finish" class="btn btn-success" form="questionForm">
                {% endif %}
            </ul>
        </div>

    </form><br><br>

    <script>
        var next = document.getElementById("next_button");
        var finish = document.getElementById("confirm_finish");
        next.onclick = function(){
            if ( $("input[type=radio]:checked").length < {{ questions|length }} ) {
                document.getElementById('fillall').innerHTML = 'Please answer all of the questions';
            }
        };

    </script>

{% endblock %}

