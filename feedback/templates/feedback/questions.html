{% extends 'feedback/base.html' %}

{% block head %}

{% endblock %}

{% block maincontent %}
    <br/><br/>
    <h3>{{ class_obj.year }} {{ class_obj.branch }} {{ class_obj.section }}</h3>
    {% if category == 'facility' %}
        <h2>Facility feedback</h2>
    {% elif category == 'faculty' %}
        <h2>{{ subject }} - {{ faculty }}</h2><br/>
    {% endif %}

    {% if error %}
        <div class="alert alert-danger">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            <strong>Error!</strong> {{ error }}
        </div>
    {% endif %}

    <form method="post" action="" id="questionForm">
        {% csrf_token %}
        <table class="table" >
            <thead>
              <tr>
                <th>Questions</th>
                <th>Rating</th>
                <th>Don't know</th>
              </tr>
            </thead>
            <tbody>
                {% for question in questions %}
                  <tr>
                    <td>{{ question.question }}</td>
                      <td>
                        <select name="review">
                            <option value="3">--select--</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Not Sure</option>
                            <option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
                    </td>
                    <td><input type="checkbox" name="idk" value="{{ forloop.counter }}" title="Please provide a reason" data-toggle="popover" data-placement="right" data-trigger="focus" data-content='<p>hiiii</p>'></td>
                  </tr>
                {% endfor %}
            </tbody>
        </table>

        <div align="center">
            <ul class="pager">
                {% if pager.has_next %}
                    <input class="btn btn-default" type="submit" value="next" name="next">
                {% else %}
                    <button type="button" class="btn btn-default btn-lg" data-toggle="modal" data-target="#myModal">Finish</button>
                {% endif %}
            </ul>
        </div>


        <ul class="pagination" style="float:right">
            {% for i in subjects %}
                <li {% ifequal forloop.counter pager.number %}class="active" {% else %}class="disabled"{% endifequal %}><a>{{ forloop.counter }}</a></li>
            {% endfor %}
        </ul>

    </form>

    {{ allRatings }}

    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Confirmation</h4>
          </div>
          <div class="modal-body">
              <p>Save all your ratings and finish?</p>
          </div>
          <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <input type="submit" value="Confirm" name="finish" class="btn btn-default" form="questionForm">
          </div>
        </div>
      </div>
    </div>


    <script>
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();
    });
    </script>


{% endblock %}