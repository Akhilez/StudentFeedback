<div>

    Graph number: {{ graph.s_no }}<br/>

    <form action="" method="post">
        {% csrf_token %}
        <div class="btn-group">
            {% for typ in graph.types %}
                <input type="submit" class="btn btn-primary" name="{{ typ }}" value="{{ typ }}">
            {% endfor %}
        </div>
    </form>

    <div id="graph"></div>

    <script language="JavaScript">

        var prev_title = [];

        var chrt = Highcharts.chart('graph', {
            chart: {
                {% ifequal graph.type 'null' %}
                    type: 'column',
                {% else %}
                    type: '{{ graph.type }}',
                {% endifequal %}
                renderTo: 'container',
                width: {{ graph.width }},
                height: {{ graph.height }},
                events: {
                    drilldown: function(e) {
                        chrt.setTitle({ text: e.point.series.name + ' ' + e.point.name });
                        prev_title.push(e.point.series.name)
                    },
                    drillup: function(e) {
                        chrt.setTitle({ text: prev_title.pop() });
                    }
                }
            },
            credits: {
                enabled: false
            },
            title: {text: '{{ graph.title }}'},
            subtitle: {text: '{{ graph.subtitle }}'},
            xAxis: {type: 'category'},
            yAxis: {
                title: {text: 'Performance'}
            },
            legend: {enabled: false},
            plotOptions: {
                series: {
                    borderWidth: 0,
                    dataLabels: {
                        enabled: true,
                        format: '{point.y:.1f}%'
                    }
                }
            },
            tooltip: {
                headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
            },
            series: [
                {
                    name: '{{ graph.series.name }}',
                    colorByPoint: true,
                    data: [
                        {% for bar in graph.series.bars %}
                            {
                                name: '{{ bar.name }}',
                                y: {{bar.value}},
                                {% ifequal bar.drilldown 'null' %}
                                    drilldown: null
                                {% else %}
                                    drilldown: '{{ bar.drilldown }}'
                                {% endifequal %}
                            },
                        {% endfor %}
                    ]
                }
            ],
            drilldown: {
                series: [
                    {% for series in Drilldown %}
                        {
                            name: '{{ series.name }}',
                            id: '{{ series.id }}',
                            colorByPoint: true,
                            data: [
                                {% for bar in series.bars %}
                                    {
                                        name: '{{ bar.name }}',
                                        y: {{ bar.value }},
                                        {% ifequal bar.drilldown 'null' %}
                                            drilldown: null
                                        {% else %}
                                            drilldown: '{{ bar.drilldown }}'
                                        {% endifequal %}
                                    },
                                {% endfor %}
                            ]
                        },
                    {% endfor %}

                    {
                        name: 'Microsoft Internet Explorer',
                        id: 'Microsoft Internet Explorer',
                        colorByPoint: true,
                        data: [
                            {name: 'v11.0', y: 24.13, drilldown: 'Akhilez'},
                            {name: 'v12,0', y: 8.03, drilldown: null}
                        ]
                    },
                    {
                        name: 'Chrome',
                        id: 'Chrome',
                        colorByPoint: true,
                        data: [
                            {name: 'v1.0', y: 1, drilldown: null},
                            {name: 'v2.0', y: 2, drilldown: null},
                            {name: 'v3.0', y: 3, drilldown: null},
                            {name: 'v4.0', y: 4, drilldown: null}
                        ]
                    },
                    {
                        name: 'Akhilez',
                        id: 'Akhilez',
                        colorByPoint: true,
                        data: [['ABC',1.1],['DEF',1.2],['GHI',1.3],['JKL',1.4]]
                    }
                ]
            }
        });

    </script>

</div>